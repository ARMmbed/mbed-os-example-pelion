https://os.mbed.com/teams/ST/code/X_NUCLEO_COMMON#21096473f63e2046337e7cfdfe16ce34eeb85647